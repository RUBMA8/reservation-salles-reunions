<div class="admin-section">
  <div class="section-header">
    <h1>Gestion des Salles</h1>
    <a href="/admin/salles/ajouter" class="btn btn-primary">â• Ajouter une salle</a>
  </div>
  
  <div class="salles-grid">
    {{#each salles}}
      <div class="salle-card">
        <h3>{{nom}}</h3>
        <p>ğŸ‘¥ <strong>CapacitÃ©:</strong> {{capacite}} personnes</p>
        <p>ğŸ”§ <strong>Ã‰quipements:</strong> {{equipements}}</p>
        <p>{{description}}</p>
        <p class="disponibilite">
          {{#if disponible}}
            âœ… Disponible
          {{else}}
            âŒ Indisponible
          {{/if}}
        </p>
        
        <div class="card-actions">
          <a href="/admin/salles/modifier/{{id}}" class="btn btn-secondary btn-sm">âœï¸ Modifier</a>
          <button onclick="deleteSalle({{id}})" class="btn btn-danger btn-sm">ğŸ—‘ï¸ Supprimer</button>
        </div>
      </div>
    {{else}}
      <p>Aucune salle pour le moment.</p>
    {{/each}}
  </div>
</div>

<script>
async function deleteSalle(id) {
  if (!confirm('ÃŠtes-vous sÃ»r de vouloir supprimer cette salle ?\n\nToutes les rÃ©servations associÃ©es seront Ã©galement supprimÃ©es.')) {
    return;
  }
  
  try {
    const response = await fetch(`/salles/${id}`, {
      method: 'DELETE',
      headers: {
        'Accept': 'application/json'
      }
    });
    
    if (response.ok) {
      alert('âœ… Salle supprimÃ©e!');
      window.location.reload();
    } else {
      const result = await response.json();
      alert('âŒ ' + result.error);
    }
  } catch (error) {
    alert('âŒ Erreur: ' + error.message);
  }
}
</script>
